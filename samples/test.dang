inttest:
        strlit  "testing integers:"
        byte    10
        stdout
        outl
        strlit  "addition: "
        stdout
        out
        int  0
.t1:    dup
        int  10
        subt
        jmp0 ~.b1
        int  1
        add
        dup
        stdout
        out
        strlit  ", "
        stdout
        out
        jmp  ~.t1
.b1:    strlit  "\n"
        stdout
        out
        strlit  "subtraction: "
        stdout
        out
.t2:    dup
        jmp0 ~.b2
        int  1
        subt
        dup
        stdout
        out
        strlit  ", "
        stdout
        out
        jmp  ~.t2
.b2:    strlit "\n"
        stdout
        out
        strlit  "multiplication: "
        stdout
        out
        int  5
        dup
        stdout
        out
        strlit  "x"
        stdout
        out
        int  4
        dup
        stdout
        out
        mult
        strlit  "="
        stdout
        out
        byte    10
        stdout
        outl
        strlit  "division: "
        stdout
        out
        int 20
        dup
        stdout
        out
        strlit "/"
        stdout
        out
        int 4
        dup
        stdout
        out
        div
        strlit "="
        stdout
        out
        byte    10
        stdout
        outl
        strlit "modulus: "
        stdout
        out
        int 20
        dup
        stdout
        out
        strlit "%"
        stdout
        out
        int 3
        dup
        stdout
        out
        mod
        strlit "="
        stdout
        out
        byte    10
        stdout
        outl
        strlit "increment: "
        stdout
        out
        int 0
        dup
        stdout
        out
        incr
        strlit "->"
        stdout
        out
        byte    10
        stdout
        outl
        strlit "decrement: "
        stdout
        out
        int 0
        dup
        stdout
        out
        decr
        strlit "->"
        stdout
        out
        byte    10
        stdout
        outl
        strlit "102 > 0 ? "
        stdout
        out
        int 102
        gt0
        byte    10
        stdout
        outl
        strlit "-123 > 0 ? "
        stdout
        out
        int 0
        int 123
        subt
        gt0
        byte    10
        stdout
        outl
        strlit "0 > 0 ? "
        stdout
        out
        int 0
        gt0
        byte    10
        stdout
        outl
        strlit "123 < 0 ? "
        stdout
        out
        int 123
        lt0
        byte    10
        stdout
        outl
        strlit "-123 < 0 ? "
        stdout
        out
        int 0
        int 123
        subt
        lt0
        byte    10
        stdout
        outl
        strlit "0 < 0 ? "
        stdout
        out
        int 0
        lt0
        byte    10
        stdout
        outl
        return
        

logictest:
        strlit "logic tests:"
        byte    10
        stdout
        outl
        strlit "1 and 1: "
        stdout
        out
        int 1
        dup
        and
        byte    10
        stdout
        outl
        strlit "1 and 0: "
        stdout
        out
        int 1
        int 0
        and
        byte    10
        stdout
        outl
        strlit "0 and 1: "
        stdout
        out
        int 0
        int 1
        and
        byte    10
        stdout
        outl
        strlit "0 and 0: "
        stdout
        out
        int 0
        dup
        and
        byte    10
        stdout
        outl
        strlit "1 or 1: "
        stdout
        out
        int 1
        dup
        or
        byte    10
        stdout
        outl
        strlit "1 or 0: "
        stdout
        out
        int 1
        int 0
        or
        byte    10
        stdout
        outl
        strlit "0 or 1: "
        stdout
        out
        int 0
        int 1
        or
        byte    10
        stdout
        outl
        strlit "0 or 0: "
        stdout
        out
        int 0
        dup
        or
        byte    10
        stdout
        outl
        strlit "1 xor 1: "
        stdout
        out
        int 1
        dup
        xor
        byte    10
        stdout
        outl
        strlit "1 xor 0: "
        stdout
        out
        int 1
        int 0
        xor
        byte    10
        stdout
        outl
        strlit "0 xor 1: "
        stdout
        out
        int 0
        int 1
        xor
        byte    10
        stdout
        outl
        strlit "0 xor 0: "
        stdout
        out
        int 0
        dup
        xor
        byte    10
        stdout
        outl



sheep:  
        strlit "hello world "
        fltlit 1.0
.top:   dup
        fltlit 0.5
        fltadd
        fltadd
        swap
        byte   2
        strcat
        return
main:
        int  10
.top:   dup
        byte    10
        stdout
        outl
        dup
        jmp0 ~.bottom
        int  1
        subt
        jmp  ~.top
.bottom: drop
        call &sheep
        byte    10
        stdout
        outl
        undef
        symdef  1, 999
        symdef  0, 14
#        strlit "first symfind... "
#        out
#        symfind 999
#        strlit "ok"
#        outl
        int 1037
        swap
        srwrite
        call &sheep
        strlit "second symfind... "
        stdout
        out
        symfind 999
        strlit "ok"
        byte    10
        stdout
        outl
        srread
        strlit "read value: "
        stdout
        out
        byte    10
        stdout
        outl
        strlit "multi ref symfind... "
        stdout
        out
        symfind 14
        strlit "ok"
        byte    10
        stdout
        outl
        srread
        strlit "read value: "
        stdout
        out
        byte    10
        stdout
        outl
        symundef 999
        strlit "third symfind... "
        stdout
        out
        symfind 999
        strlit "ok"
        byte    10
        stdout
        outl
        jmp0 ~.else
        strlit "symbol is still defined"
        byte    10
        stdout
        outl
        jmp0 ~.endif
.else:  strlit "symbol is no longer defined"
        byte    10
        stdout
        outl
.endif: 
        strlit "enter a value followed by enter: "
        stdout
        out
        byte    '\n'
        stdin
        inl
        strlit "you entered: "
        byte    10
        stdout
        outl
        byte    10
        stdout
        outl
        call    &inttest
        call    &logictest
        strlit "function literal: "
        stdout
        out
        funlit &sheep
        dup
        byte    10
        stdout
        outl
        frcall
        byte    10
        stdout
        outl
        return
