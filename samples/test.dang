inttest:
        string  "testing integers:"
        byte    10
        stdout
        outl
        string  "addition: "
        stdout
        out
        int  0
.t1:    dup
        int  10
        subt
        jmp0 ~.b1
        int  1
        add
        dup
        stdout
        out
        string  ", "
        stdout
        out
        jmp  ~.t1
.b1:    string  "\n"
        stdout
        out
        string  "subtraction: "
        stdout
        out
.t2:    dup
        jmp0 ~.b2
        int  1
        subt
        dup
        stdout
        out
        string  ", "
        stdout
        out
        jmp  ~.t2
.b2:    string "\n"
        stdout
        out
        string  "multiplication: "
        stdout
        out
        int  5
        dup
        stdout
        out
        string  "x"
        stdout
        out
        int  4
        dup
        stdout
        out
        mult
        string  "="
        stdout
        out
        byte    10
        stdout
        outl
        string  "division: "
        stdout
        out
        int 20
        dup
        stdout
        out
        string "/"
        stdout
        out
        int 4
        dup
        stdout
        out
        div
        string "="
        stdout
        out
        byte    10
        stdout
        outl
        string "modulus: "
        stdout
        out
        int 20
        dup
        stdout
        out
        string "%"
        stdout
        out
        int 3
        dup
        stdout
        out
        mod
        string "="
        stdout
        out
        byte    10
        stdout
        outl
        string "increment: "
        stdout
        out
        int 0
        dup
        stdout
        out
        incr
        string "->"
        stdout
        out
        byte    10
        stdout
        outl
        string "decrement: "
        stdout
        out
        int 0
        dup
        stdout
        out
        decr
        string "->"
        stdout
        out
        byte    10
        stdout
        outl
        string "102 > 0 ? "
        stdout
        out
        int 102
        gt0
        byte    10
        stdout
        outl
        string "-123 > 0 ? "
        stdout
        out
        int 0
        int 123
        subt
        gt0
        byte    10
        stdout
        outl
        string "0 > 0 ? "
        stdout
        out
        int 0
        gt0
        byte    10
        stdout
        outl
        string "123 < 0 ? "
        stdout
        out
        int 123
        lt0
        byte    10
        stdout
        outl
        string "-123 < 0 ? "
        stdout
        out
        int 0
        int 123
        subt
        lt0
        byte    10
        stdout
        outl
        string "0 < 0 ? "
        stdout
        out
        int 0
        lt0
        byte    10
        stdout
        outl
        return
        

logictest:
        string "logic tests:"
        byte    10
        stdout
        outl
        string "1 and 1: "
        stdout
        out
        int 1
        dup
        and
        byte    10
        stdout
        outl
        string "1 and 0: "
        stdout
        out
        int 1
        int 0
        and
        byte    10
        stdout
        outl
        string "0 and 1: "
        stdout
        out
        int 0
        int 1
        and
        byte    10
        stdout
        outl
        string "0 and 0: "
        stdout
        out
        int 0
        dup
        and
        byte    10
        stdout
        outl
        string "1 or 1: "
        stdout
        out
        int 1
        dup
        or
        byte    10
        stdout
        outl
        string "1 or 0: "
        stdout
        out
        int 1
        int 0
        or
        byte    10
        stdout
        outl
        string "0 or 1: "
        stdout
        out
        int 0
        int 1
        or
        byte    10
        stdout
        outl
        string "0 or 0: "
        stdout
        out
        int 0
        dup
        or
        byte    10
        stdout
        outl
        string "1 xor 1: "
        stdout
        out
        int 1
        dup
        xor
        byte    10
        stdout
        outl
        string "1 xor 0: "
        stdout
        out
        int 1
        int 0
        xor
        byte    10
        stdout
        outl
        string "0 xor 1: "
        stdout
        out
        int 0
        int 1
        xor
        byte    10
        stdout
        outl
        string "0 xor 0: "
        stdout
        out
        int 0
        dup
        xor
        byte    10
        stdout
        outl



sheep:  
        string "hello world "
        float 1.0
.top:   dup
        float 0.5
        addf
        addf
        swap
        byte   2
        cat
        return
main:
        int  10
.top:   dup
        byte    10
        stdout
        outl
        dup
        jmp0 ~.bottom
        int  1
        subt
        jmp  ~.top
.bottom: drop
        call &sheep
        byte    10
        stdout
        outl
        undef
        symdef  1, 999
        symdef  0, 14
#        string "first symfind... "
#        out
#        symfind 999
#        string "ok"
#        outl
        int 1037
        swap
        srwrite
        call &sheep
        string "second symfind... "
        stdout
        out
        symfind 999
        string "ok"
        byte    10
        stdout
        outl
        srread
        string "read value: "
        stdout
        out
        byte    10
        stdout
        outl
        string "multi ref symfind... "
        stdout
        out
        symfind 14
        string "ok"
        byte    10
        stdout
        outl
        srread
        string "read value: "
        stdout
        out
        byte    10
        stdout
        outl
        symundef 999
        string "third symfind... "
        stdout
        out
        symfind 999
        string "ok"
        byte    10
        stdout
        outl
        jmp0 ~.else
        string "symbol is still defined"
        byte    10
        stdout
        outl
        jmp0 ~.endif
.else:  string "symbol is no longer defined"
        byte    10
        stdout
        outl
.endif: 
        string "enter a value followed by enter: "
        stdout
        out
        byte    '\n'
        stdin
        inl
        string "you entered: "
        byte    10
        stdout
        outl
        byte    10
        stdout
        outl
        call    &inttest
        call    &logictest
        string "function literal: "
        stdout
        out
        funlit &sheep
        dup
        byte    10
        stdout
        outl
        frcall
        byte    10
        stdout
        outl
        return
